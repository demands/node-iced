#!/usr/bin/env node

// Generated by CoffeeScript 1.6.3
var columnify, glacier, knownOpts, nopt, parsedOptions, shortHands, vaultName;

exports.command = {
  description: 'Displays and manages running (and complete) jobs.'
};

if (require.main === module) {
  glacier = require('../lib/glacier');
  columnify = require('columnify');
  nopt = require('nopt');
  knownOpts = {};
  shortHands = {};
  parsedOptions = nopt(knownOpts, shortHands, process.argv);
  vaultName = parsedOptions.argv.remain.shift();
  if (vaultName == null) {
    console.error("usage: iced jobs <vault>\n\nList the jobs associated with <vault>");
    process.exit(1);
  }
  glacier.listJobs({
    vaultName: vaultName
  }, function(err, data) {
    if (err != null) {
      console.error(err.message);
      process.exit(1);
    }
    if (data.JobList.length === 0) {
      console.error("No jobs found");
      process.exit(0);
    }
    console.log(columnify(data.JobList));
    return process.exit(0);
  });
}
